var MORSE_CODE = {'\.-' : 'A', '-\.\.\.' : 'B', '-\.-\.' : 'C', '-\.\.' : 'D', '\.' : 'E', '\.\.-\.' : 'F', '--\.' : 'G', '\.\.\.\.' : 'H', '\.\.' : 'I', '\.---' : 'J', '-\.-' : 'K', '\.-\.\.' : 'L', '--' : 'M', '-\.' : 'N', '---' : 'O', '\.--\.' : 'P', '--\.-' : 'Q', '\.-\.' : 'R', '\.\.\.' : 'S', '-' : 'T', '\.\.-' : 'U', '\.\.\.-' : 'V', '\.--' : 'W', '-\.\.-' : 'X', '-\.--' : 'Y', '--\.\.' : 'Z', '\.-\.-' : 'Ä', '\.--\.-' : 'Á', '\.--\.-' : 'Å', '\.\.-\.\.' : 'É', '--\.--' : 'Ñ', '---\.' : 'Ö', '\.\.--' : 'Ü', '-----' : '0', '\.----' : '1', '\.\.---' : '2', '\.\.\.--' : '3', '\.\.\.\.-' : '4', '\.\.\.\.\.' : '5', '-\.\.\.\.' : '6', '--\.\.\.' : '7', '---\.\.' : '8', '----\.' : '9', }

var decodeBits = function(bits){
  
  var morse = [], bit = 0, bits = bits.replace(/^0+|0+$/g,'').split(''), last = '', 
      trecho = '', 
      morseCode = {'1':{1:'\.', 2:'-'},'0':{1:'', 2:' '}}, 
      frequency = { 0: {}, 1:{}}, 
      obj = { 0: {}, 1:{}},
      morseParsed = {}, 
      morseStr = '';

  for (var i = 0; i < bits.length; i++) {
    if(last.length > 0 && last != bits[i]){
      bit = last > 0 ? 1 : 0;
      obj[bit][trecho.length] = trecho;
      frequency[bit] = obj[bit];
      morse.push(trecho);
      trecho = '';
    }
    trecho += bits[i].toString();
    last = bits[i];
  }
  
  bit = last > 0 ? 1 : 0;
  obj[bit][trecho.length] = trecho;
  frequency[bit] = obj[bit];  
  morse.push(trecho);

  for(var bit in frequency){
    for(var len in frequency[bit]){
      var bitI = bit > 0 ? 0 : 1;
      if(typeof frequency[bitI][len] === 'undefined'){
        frequency[bitI][len] = Array(parseInt(len) + 1).join(bitI);
      }
    }
  }

  for(var bit in frequency){
    var y = 1;
    for(var len in frequency[bit]){
      var decod = morseCode[bit][y++];
      if(typeof decod === 'undefined')
        decod = '  ';
      morseParsed[frequency[bit][len]] = decod;
    }
  }

  for (var m in morse) {
    morseStr += (morseParsed[morse[m]]);
  }

  return morseStr;

}
 
var decodeMorse = function(morseCode){
  var msg = morseCode.split(' ');
  var msgDep = '';
  for(var i in msg){
     msgDep += (typeof MORSE_CODE[msg[i]] !== 'undefined') ? MORSE_CODE[msg[i]] : ' ';
  }
  return msgDep.trim().replace(/(\s+)/g,' ');
}


console.log('Org: ' + decodeMorse(decodeBits('1100110011001100000011000000111111001100111111001111110000000000000011001111110011111100111111000000110011001111110000001111110011001100000011')), 'Ex: HEY JUDE')
console.log('Org: ' + decodeMorse(decodeBits('1')), 'Ex: E')
console.log('Org: ' + decodeMorse(decodeBits('101')), 'IEx: ')  
console.log('Org: ' + decodeMorse(decodeBits('10001')), 'Ex: EE')
console.log('Org: ' + decodeMorse(decodeBits('00011100010101010001000000011101110101110001010111000101000111010111010001110101110000000111010101000101110100011101110111000101110111000111010000000101011101000111011101110001110101011100000001011101110111000101011100011101110001011101110100010101000000011101110111000101010111000100010111010000000111000101010100010000000101110101000101110001110111010100011101011101110000000111010100011101110111000111011101000101110101110101110')), 'Ex: THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG.')
console.log('Org: ' + decodeMorse(decodeBits('11111111111111100000000000000011111000001111100000111110000011111000000000000000111110000000000000000000000000000000000011111111111111100000111111111111111000001111100000111111111111111000000000000000111110000011111000001111111111111110000000000000001111100000111110000000000000001111111111111110000011111000001111111111111110000011111000000000000000111111111111111000001111100000111111111111111000000000000000000000000000000000001111111111111110000011111000001111100000111110000000000000001111100000111111111111111000001111100000000000000011111111111111100000111111111111111000001111111111111110000000000000001111100000111111111111111000001111111111111110000000000000001111111111111110000011111000000000000000000000000000000000001111100000111110000011111111111111100000111110000000000000001111111111111110000011111111111111100000111111111111111000000000000000111111111111111000001111100000111110000011111111111111100000000000000000000000000000000000111110000011111111111111100000111111111111111000001111111111111110000000000000001111100000111110000011111111111111100000000000000011111111111111100000111111111111111000000000000000111110000011111111111111100000111111111111111000001111100000000000000011111000001111100000111110000000000000000000000000000000000011111111111111100000111111111111111000001111111111111110000000000000001111100000111110000011111000001111111111111110000000000000001111100000000000000011111000001111111111111110000011111000000000000000000000000000000000001111111111111110000000000000001111100000111110000011111000001111100000000000000011111000000000000000000000000000000000001111100000111111111111111000001111100000111110000000000000001111100000111111111111111000000000000000111111111111111000001111111111111110000011111000001111100000000000000011111111111111100000111110000011111111111111100000111111111111111000000000000000000000000000000000001111111111111110000011111000001111100000000000000011111111111111100000111111111111111000001111111111111110000000000000001111111111111110000011111111111111100000111110000000000000001111100000111111111111111000001111100000111111111111111000001111100000111111111111111')), 'Ex: THE QUICK BROWN FOX JUMPS OVER THE LAZY DOG.')
console.log('Org: ' + decodeMorse(decodeBits('100010101000111000101110001110111011100000000001010111010001010001010100011101011101000101110001011101010001010001110111010100010111000111010001110101000111011101110000000000111011100010001010111000000000001110111010001010001110001010101000101011100011101010100000000011101010111000100010101000101010001010111000101010')));